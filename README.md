
# Проект YaMDb
Проект YaMDb собирает **отзывы** пользователей на **произведения**. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

Произведения делятся на **категории**, такие как «Книги», «Фильмы», «Музыка». Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Жуки» и вторая сюита Баха. Список категорий может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).

Произведению может быть присвоен **жанр** из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»).

Добавлять произведения, категории и жанры может только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые **отзывы** и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — **рейтинг** (целое число). На одно произведение пользователь может оставить только один отзыв.

Пользователи могут оставлять **комментарии** к отзывам.

Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

# Ресурсы API YaMDb
**AUTH**: аутентификация.

**USERS**: пользователи.

**TITLES**: произведения, к которым пишут отзывы (определённый фильм, книга или песенка).

**CATEGORIES**: категории (типы) произведений ("Фильмы", "Книги", "Музыка").

**GENRES**: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.

**REVIEWS**: отзывы на произведения. Отзыв привязан к определённому произведению.

**COMMENTS**: комментарии к отзывам. Комментарий привязан к определённому отзыву.

# Алгоритм регистрации пользователей
Пользователь отправляет POST-запрос с параметром email на `/api/v1/auth/signup/`.
YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
Пользователь отправляет POST-запрос с параметрами username и confirmation_code на `/api/v1/auth/token/`, в ответе на запрос ему приходит token (JWT-токен).
Эти операции выполняются один раз, при регистрации пользователя. В результате пользователь получает токен и может работать с API, отправляя этот токен с каждым запросом.

# Пользовательские роли
**Аноним** — может просматривать описания произведений, читать отзывы и комментарии.

**Аутентифицированный пользователь (user)** — может читать всё, как и Аноним, дополнительно может публиковать отзывы и ставить рейтинг произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы и ставить им оценки; может редактировать и удалять свои отзывы и комментарии.

**Модератор (moderator)** — те же права, что и у Аутентифицированного пользователя плюс право удалять и редактировать любые отзывы и комментарии.

**Администратор (admin)** — полные права на управление проектом и всем его содержимым. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.

**Администратор Django** — те же права, что и у роли Администратор.

# Инструкция по запуску
Репозиторий проекта находится по адресу:
https://github.com/DarkArX89/api_yamdb. 
Склонируйте его командой:
```
git clone git@github.com:DarkArX89/api_yamdb.git
```
В терминале (или командной строке) перейдите в папку с проектом. Затем создайте виртуальное окружение командой `python -m venv venv`, активируйте его (в Windows: `source venv\scripts\activate`; в Linux/Mac: `sorce venv/bin/activate`), установите зависимости командой `python -m pip install -r requirements.txt`.

Для запуска сервера разработки,  находясь в директории проекта выполните команды:
```
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

Проект запущен и доступен по адресу [localhost:8000](http://localhost:8000/).
## Примеры запросов к API

### Получение списка всех произведений:
```
get http://127.0.0.1:8000/api/v1/titles/
```
### Добавление произведения:
```
post http://127.0.0.1:8000/api/v1/titles/
```
##### в теле запроса нужно передать:
```
{
  "name": "Название произведения",
  "year": 2023,
  "description": "Описание (необязательное поле)",
  "genre": [
    "drama", "fantasy"
  ],
  "category": "movie"
}
```

### Получение списка всех жанров:
```
get http://127.0.0.1:8000/api/v1/genres/
```
### Удаление жанра:
```
delete http://127.0.0.1:8000/api/v1/genres/{slug}/
```
### Добавление нового отзыва: 
```
post http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/
```
##### в теле запроса нужно передать:
```
{
  "text": "string",
  "score": 1
}
```
### Добавление нового комментария
```
post http://127.0.0.1:8000/api/v1/titles/{title_id}/reviews/{review_id}/comments/
```
##### в теле запроса нужно передать:
```
{
  "text": "Очень остроумный комментарий."
}
```
## Использованные технологии:
Для разработки проекта использовался язык программирования **python** версии 3.9, а также следующие фреймворки:
 - Django 3.2
 - Django-filter
 - Django REST framework
 - SImple JWT
## Авторы
**Анна Шубарина**
**Алина Зырянова**
**Иван Михайлец**